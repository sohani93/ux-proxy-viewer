<!DOCTYPE html>
<html>
  <head>
    <title>UX Audit Proxy Viewer</title>
    <!-- Microsoft Clarity script -->
   <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "sdemp81sly");
</script>
    <style>
      html, body { margin: 0; padding: 0; height: 100%; background-color: #f4f4f4; }
      iframe { width: 100%; height: 100vh; border: none; }
    </style>
  </head>
  <body>
    <iframe id="viewer" src=""></iframe>
    <iframe id="targetFrame" src="URL" width="100%" height="600px"></iframe>

<script>
window.onload = function () {
  setTimeout(() => {
    const iframe = document.getElementById("targetFrame");

    try {
      const contents = iframe.contentDocument || iframe.contentWindow.document;

      if (!contents || contents.body.innerHTML.trim() === "") {
        triggerFallback(); // Fallback logic
      }
    } catch (e) {
      // Cross-origin frame block
      console.warn("Iframe access denied:", e);
      triggerFallback();
    }
  }, 3000);
};

function triggerFallback() {
  const iframe = document.getElementById("targetFrame");
  const fallbackArea = document.getElementById("fallbackUI");

  if (iframe) iframe.style.display = "none";
  if (fallbackArea) fallbackArea.style.display = "block";

  console.log("⚠️ Fallback triggered due to iframe load restriction.");
}
</script>

<div id="fallbackUI" style="display:none;">
  <p>This site couldn't be embedded. Showing fallback option.</p>
</div>
    <script>
      const params = new URLSearchParams(window.location.search);
      const url = params.get("url");
      if (url) {
        document.getElementById("viewer").src = decodeURIComponent(url);
      } else {
        document.body.innerHTML = "<h3>No URL provided. Append ?url=https://somesite.com</h3>";
      }
    </script>
  </body>
</html>
